---
import logs from "@/data/log.json";
import MainLayout from "@/layouts/mainLayout.astro";
import ContentHeader from "@/components/layout/ContentHeader.astro";
import LogsCard from "@/components/logs/LogsCard.astro";
import { formateDate, sortLogs, type LogItem, type Log } from "@/lib/utils";

const logsData: Log = sortLogs(logs).filter(
  (item: LogItem) => item.endDate !== null && item.rating !== null
);
let layoutProps = {
  title: "Log",
  description: "Games, TV Shows, Movies, Books, I've tried.",
  enableProse: true,
};
---

<MainLayout {...layoutProps}>
  <ContentHeader slot="header" title="Log">
    Games, TV Shows, Movies, Books, I've tried.
  </ContentHeader>

  <ul class="flex flex-col gap-4 !mt-5 !p-0">
    {
      logsData.map((item: LogItem) => (
        <LogsCard
          name={item.name}
          type={item.type}
          startDate={formateDate(item.startDate)}
          endDate={item.endDate}
          rating={item.rating}
        />
      ))
    }
  </ul>
</MainLayout>
